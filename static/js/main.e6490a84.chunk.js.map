{"version":3,"sources":["Button/ButtonGeoCoding.module.css","ContentBox/ContentBox.module.css","СoordinateFormComponent/СoordinateFormComponent.module.css","redux/current-coordinate-reducer.js","redux/coordinateDataState-reducer.js","redux/store.js","selectors/appSelector.js","Popup/PopupCustom.jsx","Button/ButtonGeoCoding.jsx","СoordinateFormComponent/СoordinateFormComponent.jsx","TableContainer/ItemRoute/ItemRoute.jsx","TableContainer/TableContainer.jsx","MapBox/MapBox.jsx","utils/yandexMapUtils.js","ContentBox/ContentBox.jsx","App.jsx","index.js","TableContainer/TableContainer.module.css","TableContainer/ItemRoute/ItemRoute.module.css"],"names":["module","exports","slice","createSlice","name","initialState","currentGeoData","arrayGeoData","reducers","setCurrentGeoCoord","state","action","payload","setDataToArrayGeoData","length","push","actions","currentCoordinateReducer","reducer","coordinateState","wayLength","setCoordinateState","setWayLength","correctlyWayLength","split","join","coordinateStateReducer","rootReducer","combineReducers","currentCoordinate","store","configureStore","middleware","getDefaultMiddleware","window","dataFromCoordinateState","getCoordinateForForm","createSelector","getCoordinateForRoute","lastCoordinateValueSelector","allDataCoordinateState","getWayLength","createPopupWindow","coordinate","address","date","distance","Popup","create","title","content","PopupCustom","className","btnClass","closeBtn","escToClose","ButtonGeoCoding","React","memo","currentData","lastData","currentAddress","dispatch","useDispatch","dataCoordForRoute","useSelector","lastCoordinateFromState","style","button_style","onClick","alert","coordForRoute","finalData","coordinates","Date","toDateString","toLocaleTimeString","multiRoute","ymaps","multiRouter","MultiRoute","referencePoints","params","result","model","events","add","getActiveRoute","getPaths","each","a","path","properties","get","text","destroy","getDistance","disabled","CoordinateFormComponent","geocodeCoordinate","useState","setCurrentAddress","useEffect","coords","geocode","then","res","firstGeoObject","geoObjects","getAddressLine","main_box","geoData_box","label","main_box_display","button_box","ItemRoute","props","itemRoutecontainer","number","TableContainer","dataForTable","startNumder","tableContainer","fixedBox","map","item","itemResult","MapBox","maps","useRef","onLoad","mapUrl","process","script","document","createElement","src","async","defer","body","appendChild","onload","loadScriptApi","ready","init","current","Map","center","zoom","controls","behaviors","e","toString","ref","width","height","ContentBox","contentBox","App","ReactDOM","render","getElementById"],"mappings":"8FACAA,EAAOC,QAAU,CAAC,aAAe,wC,mBCAjCD,EAAOC,QAAU,CAAC,WAAa,iC,4DCA/BD,EAAOC,QAAU,CAAC,SAAW,+CAA0C,YAAc,kDAA6C,MAAQ,4CAAuC,iBAAmB,uDAAkD,WAAa,mD,+GCO7PC,EAAQC,YAAY,CACtBC,KAAM,2BACNC,aAPiB,CACjBC,eAAgB,GAChBC,aAAc,IAMdC,SAAU,CACNC,mBADM,SACaC,EAAOC,GACtBD,EAAMJ,eAAiBK,EAAOC,SAElCC,sBAJM,SAIgBH,EAAOC,GACpBD,EAAMH,aAAaO,QAAwC,IAA9BJ,EAAMH,aAAaO,OAE1CJ,EAAMH,aAAaO,QAAU,IACpCJ,EAAMH,aAAaQ,KAAKJ,EAAOC,SAC/BF,EAAMH,aAAeG,EAAMH,aAAaL,OAAO,IAH/CQ,EAAMH,aAAaQ,KAAKJ,EAAOC,a,EASYV,EAAMc,QAAnDP,E,EAAAA,mBAAoBI,E,EAAAA,sBAErBI,EAA2Bf,EAAMgB,QCrBxChB,EAAQC,YAAY,CACtBC,KAAM,kBACNC,aAPiB,CACjBc,gBAAiB,GACjBC,UAAW,GAMXZ,SAAU,CACNa,mBADM,SACaX,EAAOC,GACtBD,EAAMS,gBAAgBJ,KAAKJ,EAAOC,UAEtCU,aAJM,SAIQZ,EAAOC,GACjB,IACIY,EADMZ,EAAOC,QAAQY,MAAM,KAAK,GACPA,MAAM,KAAKC,KAAK,KAC7Cf,EAAMU,YAAcG,M,EAKkBrB,EAAMc,QAA1CK,E,EAAAA,mBAAoBC,E,EAAAA,aAErBI,EAAyBxB,EAAMgB,QClBtCS,EAAcC,YAAgB,CAChCC,kBAAmBZ,EACnBE,gBAAiBO,IAGRI,EAAQC,YAAe,CAChCb,QAASS,EACTK,WAAY,SAACC,GAAD,OAA0BA,OAK1CC,OAAOJ,MAAQA,E,0CCRTK,EAA0B,SAACzB,GAC7B,OAAOA,EAAMS,gBAAgBA,iBAOpBiB,EAAuBC,YAAe,CAhBzB,SAAC3B,GACvB,OAAOA,EAAMmB,kBAAkBvB,kBAeqC,SAACI,GACrE,OAAOA,KAGE4B,EAAwBD,YAAe,CAhBxB,SAAC3B,GACzB,OAAOA,EAAMmB,kBAAkBtB,gBAewC,SAACG,GACxE,OAAOA,KAEE6B,EAA8BF,YAAe,CAACF,IAA0B,SAACzB,GAClF,OAAOA,EAAMR,OAAO,MAGXsC,EAAyBH,YAAe,CAACF,IAAyB,SAACzB,GAC5E,OAAOA,KAGE+B,EAAeJ,YAAe,CAnBrB,SAAC3B,GACnB,OAAOA,EAAMS,gBAAgBC,aAkB2B,SAACV,GACzD,OAAOA,K,2DC7BEgC,G,MAAoB,SAACC,EAAYC,EAASC,EAAMC,GAEzDC,IAAMC,OAAO,CACTC,MAAO,+FACPC,QACI,gCACI,gGAEI,uCACSP,EAAW,GADpB,UAC+BA,EAAW,GAD1C,UAIJ,mEAAaC,EAAb,OACA,6DAAYC,EAAZ,OACA,oMAAqCC,EAArC,cAKHK,EAAc,WAEvB,OACI,cAAC,IAAD,CACIC,UAAU,WACVC,SAAS,gBACTC,UAAU,EAKVC,YAAY,KC3BXC,EAAkBC,IAAMC,MAAK,YAAuB,IAkDtCC,EAAaC,EAlDIC,EAAoB,EAApBA,eAElCC,EAAWC,cAEXC,EAAoBC,YAAY3B,GAChC4B,EAA0BD,YAAY1B,GAkE5C,OAEI,wBAAQa,UAAWe,IAAMC,aAAcC,QAVrB,WACdL,GAAkD,IAA7BA,EAAkBlD,OACvCwD,MAAM,4DA1DM,SAACC,EAAeV,GAEhC,GAAIU,GAA0C,IAAzBA,EAAczD,OAAc,CAC7C,IAAI0D,EAAY,CACZC,YAAaF,EAAc,GAC3B3B,QAASiB,EACThB,KAAK,GAAD,QAAK,IAAI6B,MAAOC,eAAhB,cAAmC,IAAID,MAAOE,sBAClD9B,SAAU,KAEdgB,EAASzC,EAAmBmD,IAC5B9B,EAAkB8B,EAAUC,YAAaD,EAAU5B,QAAS4B,EAAU3B,KAAM2B,EAAU1B,eAEnF,GAAIyB,GAAiBA,EAAczD,OAAS,EAAG,CAElD,IAAI+D,EAAa,IAAI3C,OAAO4C,MAAMC,YAAYC,WAC1C,CACIC,gBAAiBV,EACjBW,OAAQ,CAACC,OAAQ,KAIzBN,EAAWO,MAAMC,OAAOC,IAAI,kBAAkB,WACxBT,EAAWU,iBACMC,WAElBC,KAAjB,+BAAAC,EAAA,MAAsB,WAAgBC,GAAhB,iBAAAD,EAAA,sEACGC,EAAKC,WAAWC,IAAI,YAAYC,KADnC,OACdhD,EADc,OAEd0B,EAAY,CACZC,YAAaF,EAAc,GAC3B3B,QAASiB,EACThB,KAAK,GAAD,QAAK,IAAI6B,MAAOC,eAAhB,cAAmC,IAAID,MAAOE,sBAClD9B,SAAUA,GAEdgB,EAASzC,EAAmBmD,IAC5BV,EAASxC,EAAawB,IACtBJ,EAAkB8B,EAAUC,YAAaD,EAAU5B,QAAS4B,EAAU3B,KAAM2B,EAAU1B,UAVpE,2CAAtB,uDAaA+B,EAAWkB,cAsBfC,CAAYhC,EAAmBH,IAO3BoC,UAxBWtC,EAwBaK,EAxBAJ,EAwBmBM,GAtBxB,IAAvBP,EAAY7C,QAAoC,IAApB8C,EAAS9C,UAEP,IAAvB6C,EAAY7C,QAAoC,IAApB8C,EAAS9C,UAErC6C,EAAYzD,OAAO,GAAG,GAAG,KAAO0D,EAAS,GAAGa,YAAY,IAExDd,EAAYzD,OAAO,GAAG,GAAG,KAAO0D,EAAS,GAAGa,YAAY,SAA5D,IAeP,uEC1EKyB,EAA0B,WAEnC,IAAMC,EAAoBlC,YAAY7B,GAFG,EAIGgE,mBAAS,MAJZ,mBAIlCvC,EAJkC,KAIlBwC,EAJkB,KAmBzC,OANAC,qBAAU,WAPS,IAACC,EAQZJ,EAAkBrF,OAAS,IARfyF,EASDJ,EARfjE,OAAO4C,MAAM0B,QAAQD,GAAQE,MAAK,SAAUC,GACxC,IAAIC,EAAiBD,EAAIE,WAAWf,IAAI,GACxCQ,EAAkBM,EAAeE,wBAQtC,CAACV,IAGA,sBAAK/C,UAAWe,IAAM2C,SAAtB,UAEI,sBAAK1D,UAAWe,IAAM4C,YAAtB,UAEI,qBAAK3D,UAAWe,IAAM6C,MAAtB,kBACA,qBAAK5D,UAAWe,IAAM8C,iBAAtB,SACKd,GAAqBA,EAAkB,KAG5C,qBAAK/C,UAAWe,IAAM6C,MAAtB,kBACA,qBAAK5D,UAAWe,IAAM8C,iBAAtB,SACKd,GAAqBA,EAAkB,KAG5C,qBAAK/C,UAAWe,IAAM6C,MAAtB,6CACA,qBAAK5D,UAAWe,IAAM8C,iBAAtB,SACKpD,OAIT,qBAAKT,UAAWe,IAAM+C,WAAtB,SACI,cAAC1D,EAAD,CAAiBK,eAAgBA,U,gCC7CpCsD,EAAY1D,IAAMC,MAAK,SAAC0D,GAAW,IAAD,EAEHA,EAAK,KAAtC3C,EAFoC,EAEpCA,YAAY7B,EAFwB,EAExBA,QAASE,EAFe,EAEfA,SAE5B,OACI,sBAAKM,UAAWe,IAAMkD,mBAAtB,UACI,qBAAKjE,UAAWe,IAAMmD,OAAtB,SAA+BF,EAAME,SAErC,sBAAKlE,UAAWe,IAAMxB,WAAtB,UACI,wCAAW8B,EAAY,GAAGvE,MAAM,EAAG,OACnC,wCAAWuE,EAAY,GAAGvE,MAAM,EAAG,UAGvC,qBAAKkD,UAAWe,IAAMvB,QAAtB,SAAgCA,IAChC,qBAAKQ,UAAWe,IAAMrB,SAAtB,SAAiCA,UCXhCyE,EAAiB,WAE1B,IAAMC,EAAevD,YAAYzB,GAC3BpB,EAAY6C,YAAYxB,GAE1BgF,EAAc,EAElB,OACI,sBAAKrE,UAAWe,IAAMuD,eAAtB,UAEI,sBAAKtE,UAAWe,IAAMkD,mBAAtB,UACI,qBAAKjE,UAAWe,IAAMmD,OAAtB,oBACA,qBAAKlE,UAAWe,IAAMxB,WAAtB,0EACA,qBAAKS,UAAWe,IAAMvB,QAAtB,4CACA,qBAAKQ,UAAWe,IAAMrB,SAAtB,uDAGJ,qBAAKM,UAAWe,IAAMwD,SAAtB,SACKH,EAAaI,KAAI,SAACC,GAAD,OAAU,cAACV,EAAD,CAAWG,OAAQG,IAA+BI,KAAMA,GAAjBA,EAAKhF,WAG5E,sBAAKO,UAAWe,IAAM2D,WAAtB,UACI,iIAA+B,iCAAO1G,EAAP,0BCtBjC2G,EAAS,WAEnB,IAAMC,EAAOC,mBAEPnE,EAAWC,cAOjBuC,qBAAU,YCjBe,SAAC4B,GAC1B,IAAMC,EAAM,iDAA6CC,uCAA7C,eAENC,EAASC,SAASC,cAAc,UACtCF,EAAOG,IAAML,EACbE,EAAOI,OAAQ,EACfJ,EAAOK,OAAQ,EACfJ,SAASK,KAAKC,YAAYP,GAC1BA,EAAOQ,OAASX,EDUZY,EAAc,WACV5G,OAAO4C,MAAMiE,MAAMC,QAExB,IAEH,IAAMA,EAAO,WAELhB,EAAKiB,SACG,IAAI/G,OAAO4C,MAAMoE,IAAIlB,EAAKiB,QAAS,CACvCE,OAAQ,CAAC,KAAM,OACfC,KAAM,GACNC,SAAU,CAAC,eACXC,UAAW,CACP,OACA,gBAGFjE,OAAOC,IAAI,YAAY,SAAUiE,GACnC,IAAIhD,EAASgD,EAAE1D,IAAI,UAAU2D,WAAWhI,MAAM,KAC9CsC,EAASrD,EAAmB8F,IAC5BzC,EAASjD,EAAsB0F,QAK3C,OACI,8BACI,qBAAKkD,IAAKzB,EAAM7D,MAjCV,CACVuF,MAAO,SACPC,OAAQ,a,iBETHC,EAAa,WACtB,OACI,sBAAKxG,UAAWe,IAAM0F,WAAtB,UACI,cAAC,EAAD,IACA,cAAC,EAAD,QCOGC,OAVf,WACI,OACI,sBAAK1G,UAAU,MAAf,UACI,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,EAAD,QCJZ2G,IAASC,OACL,cAAC,IAAD,CAAUlI,MAAOA,EAAjB,SACI,cAAC,GAAD,MAEJwG,SAAS2B,eAAe,U,kBCV5BjK,EAAOC,QAAU,CAAC,eAAiB,uCAAuC,SAAW,iCAAiC,mBAAqB,2CAA2C,WAAa,mCAAmC,OAAS,+BAA+B,WAAa,mCAAmC,QAAU,gCAAgC,SAAW,mC,kBCAnXD,EAAOC,QAAU,CAAC,mBAAqB,sCAAsC,OAAS,0BAA0B,WAAa,8BAA8B,QAAU,2BAA2B,SAAW,+B","file":"static/js/main.e6490a84.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button_style\":\"ButtonGeoCoding_button_style__2wLov\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentBox\":\"ContentBox_contentBox__1Xu0L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_box\":\"СoordinateFormComponent_main_box__AZucS\",\"geoData_box\":\"СoordinateFormComponent_geoData_box__3zY08\",\"label\":\"СoordinateFormComponent_label__T6T2D\",\"main_box_display\":\"СoordinateFormComponent_main_box_display__vnozg\",\"button_box\":\"СoordinateFormComponent_button_box__38Pox\"};","import {createSlice} from '@reduxjs/toolkit';\r\n\r\n\r\nconst initialState = {\r\n    currentGeoData: [],\r\n    arrayGeoData: []\r\n}\r\n\r\nconst slice = createSlice({\r\n    name: 'currentCoordinateReducer',\r\n    initialState: initialState,\r\n    reducers: {\r\n        setCurrentGeoCoord(state, action) {\r\n            state.currentGeoData = action.payload;\r\n        },\r\n        setDataToArrayGeoData(state, action){\r\n            if (!state.arrayGeoData.length || state.arrayGeoData.length === 1){\r\n                state.arrayGeoData.push(action.payload)\r\n            } else if (state.arrayGeoData.length >= 2){\r\n                state.arrayGeoData.push(action.payload)\r\n                state.arrayGeoData = state.arrayGeoData.slice(-2)\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\nexport const {setCurrentGeoCoord, setDataToArrayGeoData} = slice.actions;\r\n\r\nexport const currentCoordinateReducer = slice.reducer\r\n\r\n\r\n","import {createSlice} from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n    coordinateState: [],\r\n    wayLength: 0\r\n}\r\n\r\nconst slice = createSlice({\r\n    name: 'coordinateState',\r\n    initialState: initialState,\r\n    reducers: {\r\n        setCoordinateState(state, action) {\r\n            state.coordinateState.push(action.payload)\r\n        },\r\n        setWayLength (state, action)  {\r\n            let way = action.payload.split(' ')[0]\r\n            let correctlyWayLength = way.split(',').join('.')\r\n            state.wayLength += +correctlyWayLength\r\n        }\r\n    }\r\n})\r\n\r\nexport const {setCoordinateState, setWayLength} = slice.actions;\r\n\r\nexport const coordinateStateReducer = slice.reducer\r\n\r\n\r\n","import {combineReducers} from 'redux';\r\nimport {configureStore} from '@reduxjs/toolkit';\r\nimport {currentCoordinateReducer} from './current-coordinate-reducer';\r\nimport {coordinateStateReducer} from \"./coordinateDataState-reducer\";\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    currentCoordinate: currentCoordinateReducer,\r\n    coordinateState: coordinateStateReducer\r\n})\r\n\r\nexport const store = configureStore({\r\n    reducer: rootReducer,\r\n    middleware: (getDefaultMiddleware) => getDefaultMiddleware()\r\n})\r\n\r\n\r\n//@ts-ignore\r\nwindow.store = store","import {createSelector} from '@reduxjs/toolkit';\r\n\r\nconst currentCoordinate = (state) => {\r\n    return state.currentCoordinate.currentGeoData\r\n}\r\n\r\nconst arrayGeoCoordinates = (state) => {\r\n    return state.currentCoordinate.arrayGeoData\r\n}\r\n\r\nconst dataFromCoordinateState = (state) => {\r\n    return state.coordinateState.coordinateState\r\n}\r\n\r\nconst dataWayLength = (state) => {\r\n    return state.coordinateState.wayLength\r\n}\r\n\r\nexport const getCoordinateForForm = createSelector([currentCoordinate], (state) => {\r\n    return state\r\n})\r\n\r\nexport const getCoordinateForRoute = createSelector([arrayGeoCoordinates], (state) => {\r\n    return state\r\n})\r\nexport const lastCoordinateValueSelector = createSelector([dataFromCoordinateState], (state) => {\r\n    return state.slice(-1)\r\n})\r\n\r\nexport const allDataCoordinateState = createSelector([dataFromCoordinateState],(state) => {\r\n    return state\r\n})\r\n\r\nexport const getWayLength = createSelector([dataWayLength], (state) => {\r\n    return state\r\n})\r\n\r\n\r\n","import React from 'react';\r\nimport Popup from 'react-popup';\r\nimport 'react-popup/style.css'\r\n\r\n\r\nexport const createPopupWindow = (coordinate, address, date, distance) => {\r\n\r\n    Popup.create({\r\n        title: 'Данные о маршруте',\r\n        content:\r\n            <div>\r\n                <div>\r\n                    Координаты:\r\n                    <div>\r\n                        lat:{coordinate[0]}, lng: {coordinate[1]}.\r\n                    </div>\r\n                </div>\r\n                <div>Адрес: {address}.</div>\r\n                <div>Дата: {date}.</div>\r\n                <div>Дистанция от предыдущей точки: {distance}.</div>\r\n            </div>\r\n    });\r\n}\r\n\r\nexport const PopupCustom = () => {\r\n\r\n    return (\r\n        <Popup\r\n            className=\"mm-popup\"\r\n            btnClass=\"mm-popup__btn\"\r\n            closeBtn={true}\r\n            // closeHtml={null}\r\n            // defaultOk=\"Ok\"\r\n            // defaultCancel=\"Cancel\"\r\n            // wildClasses={false}\r\n            escToClose={true}\r\n        />\r\n    )\r\n}","import React from \"react\";\r\nimport style from './ButtonGeoCoding.module.css'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {getCoordinateForRoute, lastCoordinateValueSelector} from \"../selectors/appSelector\";\r\nimport {setCoordinateState, setWayLength} from \"../redux/coordinateDataState-reducer\";\r\nimport {createPopupWindow} from \"../Popup/PopupCustom\";\r\n\r\n\r\nexport const ButtonGeoCoding = React.memo(({currentAddress}) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const dataCoordForRoute = useSelector(getCoordinateForRoute);\r\n    const lastCoordinateFromState = useSelector(lastCoordinateValueSelector)\r\n\r\n    const getDistance = (coordForRoute, currentAddress) => {\r\n\r\n        if (coordForRoute && coordForRoute.length === 1) {\r\n            let finalData = {\r\n                coordinates: coordForRoute[0],\r\n                address: currentAddress,\r\n                date: `${new Date().toDateString()}, ${new Date().toLocaleTimeString()}`,\r\n                distance: '0',\r\n            };\r\n            dispatch(setCoordinateState(finalData))\r\n            createPopupWindow(finalData.coordinates, finalData.address, finalData.date, finalData.distance)\r\n\r\n        } else if (coordForRoute && coordForRoute.length > 1) {\r\n\r\n            let multiRoute = new window.ymaps.multiRouter.MultiRoute(\r\n                {\r\n                    referencePoints: coordForRoute,\r\n                    params: {result: 1}\r\n                }\r\n            );\r\n\r\n            multiRoute.model.events.add('requestsuccess', function () {\r\n                let activeRoute = multiRoute.getActiveRoute();\r\n                let activeRoutePaths = activeRoute.getPaths();\r\n\r\n                activeRoutePaths.each(async function (path) {\r\n                    let distance = await path.properties.get(\"distance\").text;\r\n                    let finalData = {\r\n                        coordinates: coordForRoute[1],\r\n                        address: currentAddress,\r\n                        date: `${new Date().toDateString()}, ${new Date().toLocaleTimeString()}`,\r\n                        distance: distance,\r\n                    };\r\n                    dispatch(setCoordinateState(finalData))\r\n                    dispatch(setWayLength(distance))\r\n                    createPopupWindow(finalData.coordinates, finalData.address, finalData.date, finalData.distance, finalData.duration)\r\n\r\n                });\r\n                multiRoute.destroy();\r\n            });\r\n        }\r\n    }\r\n\r\n    const buttonDisable = (currentData, lastData) => {\r\n\r\n        if (currentData.length === 0 && lastData.length === 0) {\r\n            return false\r\n        } else if (currentData.length !== 0 && lastData.length === 0) {\r\n            return false\r\n        } else if (currentData.slice(-1)[0][0] === lastData[0].coordinates[0]) {\r\n            return true\r\n        } else if (currentData.slice(-1)[0][0] !== lastData[0].coordinates[0]) {\r\n            return false\r\n        }\r\n    }\r\n\r\n    const buttonHandler = () => {\r\n        if (dataCoordForRoute && dataCoordForRoute.length === 0) {\r\n            alert('Нет данных!')\r\n        } else {\r\n            getDistance(dataCoordForRoute, currentAddress)\r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <button className={style.button_style} onClick={buttonHandler}\r\n                disabled={buttonDisable(dataCoordForRoute, lastCoordinateFromState)}\r\n        >\r\n            Отправить\r\n        </button>\r\n    )\r\n})","import React, {useEffect, useState} from 'react';\r\nimport style from './СoordinateFormComponent.module.css'\r\nimport {useSelector} from \"react-redux\";\r\nimport {getCoordinateForForm} from \"../selectors/appSelector\";\r\nimport {ButtonGeoCoding} from \"../Button/ButtonGeoCoding\";\r\n\r\n\r\nexport const CoordinateFormComponent = () => {\r\n\r\n    const geocodeCoordinate = useSelector(getCoordinateForForm);\r\n\r\n    const [currentAddress, setCurrentAddress] = useState(null)\r\n\r\n    const getAddress = (coords) => {\r\n        window.ymaps.geocode(coords).then(function (res) {\r\n            let firstGeoObject = res.geoObjects.get(0);\r\n            setCurrentAddress(firstGeoObject.getAddressLine())\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (geocodeCoordinate.length > 0) {\r\n            getAddress(geocodeCoordinate)\r\n        }\r\n    }, [geocodeCoordinate])\r\n\r\n    return (\r\n        <div className={style.main_box}>\r\n\r\n            <div className={style.geoData_box}>\r\n\r\n                <div className={style.label}>Lat:</div>\r\n                <div className={style.main_box_display}>\r\n                    {geocodeCoordinate && geocodeCoordinate[0]}\r\n                </div>\r\n\r\n                <div className={style.label}>Lng:</div>\r\n                <div className={style.main_box_display}>\r\n                    {geocodeCoordinate && geocodeCoordinate[1]}\r\n                </div>\r\n\r\n                <div className={style.label}>Адрес:</div>\r\n                <div className={style.main_box_display}>\r\n                    {currentAddress}\r\n                </div>\r\n\r\n            </div>\r\n            <div className={style.button_box}>\r\n                <ButtonGeoCoding currentAddress={currentAddress}/>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport style from './ItemRoute.module.css'\r\n\r\nexport const ItemRoute = React.memo((props) => {\r\n\r\n    const {coordinates,address, distance} = props['item'];\r\n\r\n    return (\r\n        <div className={style.itemRoutecontainer}>\r\n            <div className={style.number}>{props.number}</div>\r\n\r\n            <div className={style.coordinate}>\r\n                <div>lat: {coordinates[0].slice(0, 10)}</div>\r\n                <div>lng: {coordinates[1].slice(0, 10)}</div>\r\n            </div>\r\n\r\n            <div className={style.address}>{address}</div>\r\n            <div className={style.distance}>{distance}</div>\r\n        </div>\r\n    )\r\n})","import React from 'react';\r\nimport style from './TableContainer.module.css'\r\nimport {ItemRoute} from \"./ItemRoute/ItemRoute\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {allDataCoordinateState, getWayLength} from \"../selectors/appSelector\";\r\n\r\nexport const TableContainer = () => {\r\n\r\n    const dataForTable = useSelector(allDataCoordinateState)\r\n    const wayLength = useSelector(getWayLength)\r\n\r\n    let startNumder = 1;\r\n\r\n    return (\r\n        <div className={style.tableContainer}>\r\n\r\n            <div className={style.itemRoutecontainer}>\r\n                <div className={style.number}>№</div>\r\n                <div className={style.coordinate}>Координаты</div>\r\n                <div className={style.address}>Адрес</div>\r\n                <div className={style.distance}>Путь, км</div>\r\n            </div>\r\n\r\n            <div className={style.fixedBox}>\r\n                {dataForTable.map((item) => <ItemRoute number={startNumder++} key={item.date} item={item}/>)}\r\n            </div>\r\n\r\n            <div className={style.itemResult}>\r\n                <span>Итого расстояние: </span><span>{wayLength} км</span>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n};\r\n\r\n\r\n","import React, {useEffect, useRef} from \"react\";\r\nimport {loadScriptApi} from \"../utils/yandexMapUtils\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setCurrentGeoCoord, setDataToArrayGeoData} from '../redux/current-coordinate-reducer'\r\n\r\n\r\nexport  const MapBox = () => {\r\n\r\n    const maps = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const style = {\r\n        width: '67.8vw',\r\n        height: \"90vh\"\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadScriptApi(() => {\r\n            window.ymaps.ready(init);\r\n        });\r\n    }, []);\r\n\r\n    const init = () => {\r\n        let myMap;\r\n        if (maps.current) {\r\n            myMap = new window.ymaps.Map(maps.current, {\r\n                center: [53.9, 27.56],\r\n                zoom: 12,\r\n                controls: ['zoomControl'],\r\n                behaviors: [\r\n                    \"drag\",\r\n                    \"scrollZoom\",\r\n                ]\r\n            })\r\n            myMap.events.add('dblclick', function (e) {\r\n                let coords = e.get('coords').toString().split(',');\r\n                dispatch(setCurrentGeoCoord(coords))\r\n                dispatch(setDataToArrayGeoData(coords))\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div >\r\n            <div ref={maps} style={style}/>\r\n        </div>\r\n    );\r\n}","export const loadScriptApi = (onLoad) => {\r\n    const mapUrl = `https://api-maps.yandex.ru/2.1/?apikey=${process.env.REACT_APP_YANDEX_API_KEY}&lang=ru_RU`\r\n\r\n    const script = document.createElement(\"script\");\r\n    script.src = mapUrl;\r\n    script.async = true;\r\n    script.defer = true;\r\n    document.body.appendChild(script);\r\n    script.onload = onLoad;\r\n};\r\n","import {TableContainer} from \"../TableContainer/TableContainer\";\r\nimport {MapBox} from \"../MapBox/MapBox\";\r\nimport React from \"react\";\r\nimport style from './ContentBox.module.css'\r\n\r\nexport const ContentBox = () => {\r\n    return (\r\n        <div className={style.contentBox}>\r\n            <TableContainer/>\r\n            <MapBox/>\r\n        </div>\r\n    )\r\n}","import React from \"react\";\nimport './App.css';\nimport {CoordinateFormComponent} from \"./СoordinateFormComponent/СoordinateFormComponent\";\nimport {PopupCustom} from \"./Popup/PopupCustom\";\nimport {ContentBox} from \"./ContentBox/ContentBox\";\n\nfunction App() {\n    return (\n        <div className=\"App\">\n            <PopupCustom />\n            <CoordinateFormComponent/>\n            <ContentBox />\n        </div>\n    );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {Provider} from \"react-redux\";\nimport {store} from './redux/store'\nimport App from \"./App\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tableContainer\":\"TableContainer_tableContainer__2BRB0\",\"fixedBox\":\"TableContainer_fixedBox__2qyhi\",\"itemRoutecontainer\":\"TableContainer_itemRoutecontainer__1sCke\",\"itemResult\":\"TableContainer_itemResult__LHuap\",\"number\":\"TableContainer_number__21AC7\",\"coordinate\":\"TableContainer_coordinate__3xlTm\",\"address\":\"TableContainer_address__2sulV\",\"distance\":\"TableContainer_distance__fSobp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemRoutecontainer\":\"ItemRoute_itemRoutecontainer__18x_b\",\"number\":\"ItemRoute_number__1_KdP\",\"coordinate\":\"ItemRoute_coordinate__2lcFs\",\"address\":\"ItemRoute_address__2Lhg3\",\"distance\":\"ItemRoute_distance__1iG76\"};"],"sourceRoot":""}