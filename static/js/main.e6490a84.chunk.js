(this.webpackJsonpwialon_test=this.webpackJsonpwialon_test||[]).push([[0],{21:function(e,t,n){e.exports={button_style:"ButtonGeoCoding_button_style__2wLov"}},22:function(e,t,n){e.exports={contentBox:"ContentBox_contentBox__1Xu0L"}},29:function(e,t,n){},35:function(e,t,n){},4:function(e,t,n){e.exports={main_box:"\u0421oordinateFormComponent_main_box__AZucS",geoData_box:"\u0421oordinateFormComponent_geoData_box__3zY08",label:"\u0421oordinateFormComponent_label__T6T2D",main_box_display:"\u0421oordinateFormComponent_main_box_display__vnozg",button_box:"\u0421oordinateFormComponent_button_box__38Pox"}},46:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n.n(c),r=n(9),s=n.n(r),i=(n(29),n(3)),d=n(2),l=n(6),u=Object(l.b)({name:"currentCoordinateReducer",initialState:{currentGeoData:[],arrayGeoData:[]},reducers:{setCurrentGeoCoord:function(e,t){e.currentGeoData=t.payload},setDataToArrayGeoData:function(e,t){e.arrayGeoData.length&&1!==e.arrayGeoData.length?e.arrayGeoData.length>=2&&(e.arrayGeoData.push(t.payload),e.arrayGeoData=e.arrayGeoData.slice(-2)):e.arrayGeoData.push(t.payload)}}}),b=u.actions,j=b.setCurrentGeoCoord,m=b.setDataToArrayGeoData,_=u.reducer,x=Object(l.b)({name:"coordinateState",initialState:{coordinateState:[],wayLength:0},reducers:{setCoordinateState:function(e,t){e.coordinateState.push(t.payload)},setWayLength:function(e,t){var n=t.payload.split(" ")[0].split(",").join(".");e.wayLength+=+n}}}),h=x.actions,O=h.setCoordinateState,p=h.setWayLength,f=x.reducer,v=Object(d.c)({currentCoordinate:_,coordinateState:f}),y=Object(l.a)({reducer:v,middleware:function(e){return e()}});window.store=y;n(35);var g=n(23),C=n(4),w=n.n(C),D=n(10),N=function(e){return e.coordinateState.coordinateState},R=Object(D.a)([function(e){return e.currentCoordinate.currentGeoData}],(function(e){return e})),S=Object(D.a)([function(e){return e.currentCoordinate.arrayGeoData}],(function(e){return e})),G=Object(D.a)([N],(function(e){return e.slice(-1)})),T=Object(D.a)([N],(function(e){return e})),L=Object(D.a)([function(e){return e.coordinateState.wayLength}],(function(e){return e})),B=n(15),A=n.n(B),k=n(20),F=n(21),I=n.n(F),z=n(16),E=n.n(z),P=(n(45),function(e,t,n,c){E.a.create({title:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0435",content:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:["\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b:",Object(a.jsxs)("div",{children:["lat:",e[0],", lng: ",e[1],"."]})]}),Object(a.jsxs)("div",{children:["\u0410\u0434\u0440\u0435\u0441: ",t,"."]}),Object(a.jsxs)("div",{children:["\u0414\u0430\u0442\u0430: ",n,"."]}),Object(a.jsxs)("div",{children:["\u0414\u0438\u0441\u0442\u0430\u043d\u0446\u0438\u044f \u043e\u0442 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u0438: ",c,"."]})]})})}),q=function(){return Object(a.jsx)(E.a,{className:"mm-popup",btnClass:"mm-popup__btn",closeBtn:!0,escToClose:!0})},J=o.a.memo((function(e){var t,n,c=e.currentAddress,o=Object(i.b)(),r=Object(i.c)(S),s=Object(i.c)(G);return Object(a.jsx)("button",{className:I.a.button_style,onClick:function(){r&&0===r.length?alert("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445!"):function(e,t){if(e&&1===e.length){var n={coordinates:e[0],address:t,date:"".concat((new Date).toDateString(),", ").concat((new Date).toLocaleTimeString()),distance:"0"};o(O(n)),P(n.coordinates,n.address,n.date,n.distance)}else if(e&&e.length>1){var a=new window.ymaps.multiRouter.MultiRoute({referencePoints:e,params:{result:1}});a.model.events.add("requestsuccess",(function(){a.getActiveRoute().getPaths().each(function(){var n=Object(k.a)(A.a.mark((function n(a){var c,r;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.properties.get("distance").text;case 2:c=n.sent,r={coordinates:e[1],address:t,date:"".concat((new Date).toDateString(),", ").concat((new Date).toLocaleTimeString()),distance:c},o(O(r)),o(p(c)),P(r.coordinates,r.address,r.date,r.distance);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),a.destroy()}))}}(r,c)},disabled:(t=r,n=s,(0!==t.length||0!==n.length)&&(0===t.length||0!==n.length)&&(t.slice(-1)[0][0]===n[0].coordinates[0]||t.slice(-1)[0][0]===n[0].coordinates[0]&&void 0)),children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})),M=function(){var e=Object(i.c)(R),t=Object(c.useState)(null),n=Object(g.a)(t,2),o=n[0],r=n[1];return Object(c.useEffect)((function(){var t;e.length>0&&(t=e,window.ymaps.geocode(t).then((function(e){var t=e.geoObjects.get(0);r(t.getAddressLine())})))}),[e]),Object(a.jsxs)("div",{className:w.a.main_box,children:[Object(a.jsxs)("div",{className:w.a.geoData_box,children:[Object(a.jsx)("div",{className:w.a.label,children:"Lat:"}),Object(a.jsx)("div",{className:w.a.main_box_display,children:e&&e[0]}),Object(a.jsx)("div",{className:w.a.label,children:"Lng:"}),Object(a.jsx)("div",{className:w.a.main_box_display,children:e&&e[1]}),Object(a.jsx)("div",{className:w.a.label,children:"\u0410\u0434\u0440\u0435\u0441:"}),Object(a.jsx)("div",{className:w.a.main_box_display,children:o})]}),Object(a.jsx)("div",{className:w.a.button_box,children:Object(a.jsx)(J,{currentAddress:o})})]})},W=n(5),Z=n.n(W),H=n(8),K=n.n(H),U=o.a.memo((function(e){var t=e.item,n=t.coordinates,c=t.address,o=t.distance;return Object(a.jsxs)("div",{className:K.a.itemRoutecontainer,children:[Object(a.jsx)("div",{className:K.a.number,children:e.number}),Object(a.jsxs)("div",{className:K.a.coordinate,children:[Object(a.jsxs)("div",{children:["lat: ",n[0].slice(0,10)]}),Object(a.jsxs)("div",{children:["lng: ",n[1].slice(0,10)]})]}),Object(a.jsx)("div",{className:K.a.address,children:c}),Object(a.jsx)("div",{className:K.a.distance,children:o})]})})),V=function(){var e=Object(i.c)(T),t=Object(i.c)(L),n=1;return Object(a.jsxs)("div",{className:Z.a.tableContainer,children:[Object(a.jsxs)("div",{className:Z.a.itemRoutecontainer,children:[Object(a.jsx)("div",{className:Z.a.number,children:"\u2116"}),Object(a.jsx)("div",{className:Z.a.coordinate,children:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b"}),Object(a.jsx)("div",{className:Z.a.address,children:"\u0410\u0434\u0440\u0435\u0441"}),Object(a.jsx)("div",{className:Z.a.distance,children:"\u041f\u0443\u0442\u044c, \u043a\u043c"})]}),Object(a.jsx)("div",{className:Z.a.fixedBox,children:e.map((function(e){return Object(a.jsx)(U,{number:n++,item:e},e.date)}))}),Object(a.jsxs)("div",{className:Z.a.itemResult,children:[Object(a.jsx)("span",{children:"\u0418\u0442\u043e\u0433\u043e \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435: "}),Object(a.jsxs)("span",{children:[t," \u043a\u043c"]})]})]})},X=function(){var e=Object(c.useRef)(),t=Object(i.b)();Object(c.useEffect)((function(){!function(e){var t="https://api-maps.yandex.ru/2.1/?apikey=".concat("8a1fbb77-dcfc-4258-a044-b02870da0b25","&lang=ru_RU"),n=document.createElement("script");n.src=t,n.async=!0,n.defer=!0,document.body.appendChild(n),n.onload=e}((function(){window.ymaps.ready(n)}))}),[]);var n=function(){e.current&&new window.ymaps.Map(e.current,{center:[53.9,27.56],zoom:12,controls:["zoomControl"],behaviors:["drag","scrollZoom"]}).events.add("dblclick",(function(e){var n=e.get("coords").toString().split(",");t(j(n)),t(m(n))}))};return Object(a.jsx)("div",{children:Object(a.jsx)("div",{ref:e,style:{width:"67.8vw",height:"90vh"}})})},Y=n(22),Q=n.n(Y),$=function(){return Object(a.jsxs)("div",{className:Q.a.contentBox,children:[Object(a.jsx)(V,{}),Object(a.jsx)(X,{})]})};var ee=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(q,{}),Object(a.jsx)(M,{}),Object(a.jsx)($,{})]})};s.a.render(Object(a.jsx)(i.a,{store:y,children:Object(a.jsx)(ee,{})}),document.getElementById("root"))},5:function(e,t,n){e.exports={tableContainer:"TableContainer_tableContainer__2BRB0",fixedBox:"TableContainer_fixedBox__2qyhi",itemRoutecontainer:"TableContainer_itemRoutecontainer__1sCke",itemResult:"TableContainer_itemResult__LHuap",number:"TableContainer_number__21AC7",coordinate:"TableContainer_coordinate__3xlTm",address:"TableContainer_address__2sulV",distance:"TableContainer_distance__fSobp"}},8:function(e,t,n){e.exports={itemRoutecontainer:"ItemRoute_itemRoutecontainer__18x_b",number:"ItemRoute_number__1_KdP",coordinate:"ItemRoute_coordinate__2lcFs",address:"ItemRoute_address__2Lhg3",distance:"ItemRoute_distance__1iG76"}}},[[46,1,2]]]);
//# sourceMappingURL=main.e6490a84.chunk.js.map